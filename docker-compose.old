version: '3.8'

services:
  # Serviço do Backend
  backend:
    build:
      context: ./backend-gerenciamento-computadores
    ports:
      - "5000:5000"
    volumes:
      # Monta o código local para live-reloading (você já tinha isso)
      - ./backend-gerenciamento-computadores:/app
      
      # <<-- NOVA LINHA -->>
      # Monta o volume 'database-data' no diretório /app/src/database do contêiner
      - database-data:/app/src/database
    environment:
      - FLASK_ENV=development
      - FLASK_APP=src/main.py

  # Serviço do Frontend (sem alterações)
  frontend:
    build:
      context: ./frontend-gerenciamento-computadores
    ports:
      - "5173:5173"
    volumes:
      - ./frontend-gerenciamento-computadores:/app
      - /app/node_modules
    depends_on:
      - backend

# <<-- NOVA SEÇÃO -->>
# Declaração do volume nomeado que será usado pelo backend
volumes:
  database-data: